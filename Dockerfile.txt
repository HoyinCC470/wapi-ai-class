# 使用完整版 Python 镜像，避免缺少系统工具导致构建卡死
FROM python:3.9

# 设置工作目录
WORKDIR /app

# 复制当前目录所有文件到容器中
COPY . .

# 关键优化：使用清华大学镜像源下载，速度极快，防止超时
RUN pip install --no-cache-dir -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 暴露 Streamlit 默认端口
EXPOSE 8501

# 启动命令
CMD ["streamlit", "run", "app.py", "--server.address=0.0.0.0"]